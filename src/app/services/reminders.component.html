<!-- HEADER -->
<div class="header">
    <h1>Today's date is {{ today | date:'fullDate' }}</h1>
</div>

<!-- QUICK OPTIONS -->
<div class="quick-options">
    <!-- Filter Dropdown (placeholder) -->
    <select class="btn-secondary" style="height: 38px; -webkit-appearance: none; padding-right: 30px;">
        <option>All Reminders</option>
        <option>Pending</option>
        <option>Completed</option>
    </select>

    <!-- Create Schedule Button -->
    <button class="btn-create" (click)="openModal()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" />
        </svg>
        Create Schedule
    </button>
</div>

<!-- REMINDERS TABLE -->
<div class="table-card">
    <table class="reminders-table">
        <thead>
            <tr>
                <th>Title</th>
                <th>Due Date</th>
                <th>Type</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngIf="isLoading">
                <td colspan="5">
                    <div class="loading-spinner-container">
                        <div class="loading-spinner"></div>
                    </div>
                </td>
            </tr>
            <ng-container *ngIf="(reminders$ | async) as reminders">
                <tr *ngFor="let reminder of reminders">
                    <td>
                        <div>{{ reminder.title }}</div>
                        <div style="font-size: 11px; color: #86868b;">{{ reminder.description }}</div>
                    </td>
                    <td>{{ reminder.dueDate.toDate() | date:'medium' }}</td>
                    <td>
                        <span class="badge" [ngClass]="reminder.type === 'custom' ? 'pending' : 'active'">
                            {{ reminder.type }}
                        </span>
                    </td>
                    <td>
                        <span class="badge" [ngClass]="reminder.status">
                            {{ reminder.status }}
                        </span>
                    </td>
                    <td>
                        <button class="btn-secondary" style="padding: 4px 8px; font-size: 12px;">View</button>
                    </td>
                </tr>
                <tr *ngIf="!isLoading && reminders.length === 0">
                    <td colspan="5" style="text-align: center; padding: 24px; color: #86868b;">
                        No reminders found.
                    </td>
                </tr>
            </ng-container>
        </tbody>
    </table>
</div>

<!-- CREATE REMINDER MODAL -->
<div class="modal-overlay" *ngIf="isModalOpen">
    <div class="modal-card">
        <form [formGroup]="reminderForm" (ngSubmit)="onSubmit()">
            <div class="modal-header">
                <h2>Create New Reminder</h2>
            </div>
            <div class="modal-body">
                <div class="field">
                    <label for="title">Title</label>
                    <input id="title" type="text" formControlName="title" placeholder="e.g. Renew vehicle insurance" />
                </div>
                <div class="field">
                    <label for="description">Description (Optional)</label>
                    <textarea id="description" formControlName="description"
                        placeholder="Add more details..."></textarea>
                </div>
                <div class="field">
                    <label for="dueDate">Due Date</label>
                    <input id="dueDate" type="date" formControlName="dueDate" />
                </div>
                <div class="field">
                    <label for="type">Type</label>
                    <select id="type" formControlName="type">
                        <option value="custom">Custom</option>
                        <option value="asset_expiry" disabled>Asset Expiry (Auto)</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" (click)="closeModal()">Cancel</button>
                <button type="submit" class="btn-primary" [disabled]="reminderForm.invalid || isSubmitting">
                    {{ isSubmitting ? 'Creating...' : 'Create Reminder' }}
                </button>
            </div>
        </form>
    </div>
</div>